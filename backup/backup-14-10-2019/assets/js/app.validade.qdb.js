!function o(e,s,l){function u(a,t){if(!s[a]){if(!e[a]){var n="function"==typeof require&&require;if(!t&&n)return n(a,!0);if(d)return d(a,!0);throw new Error("Cannot find module '"+a+"'")}var i=s[a]={exports:{}};e[a][0].call(i.exports,function(t){var n=e[a][1][t];return u(n||t)},i,i.exports,o,e,s,l)}return s[a].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,n,a){"use strict";function i(){this.getServices=function(t,n){u.getSkuDetails(t,n)},this.getServicesFromAllSkus=function(t,o){var e=this,s=0,l={};u.getVariations(t,function(i){s=i.skus.length,function n(a){a<s?e.getServices(i.skus[a].sku,function(t){l[i.skus[a].sku]=t.Services,l[i.skus[a].sku].Associated=t.Attachments,n(++a)}):o(l)}(0)})},this.getServicesFromOneSku=function(n,a){var i={};this.getServices(n,function(t){i[n]=t.Services,i[n].Associated=t.Attachments,a(i)})}}function o(){this.html="<div class='flag-validade'><p>#data-de-validade#<p></div>",this.htmlProduct='<div class="ultima-chance flag-#sku#"><span>pra usar já</span>válido até #data-de-validade#</div>',this.dateToFlag=function(t){return this.html.replace("#data-de-validade#",t)},this.productFlag=function(t,n){return this.htmlProduct.replace("#data-de-validade#",t).replace("#sku#",n)}}function e(t,n,a){var i=function(t){return(new o).productFlag(t.string,t.sku)}(t);0==$(a).length&&$('<div class="'+a.replace(".","")+'"></div>').insertBefore(n),$(a).append(i)}function s(t){if(null!=window.validade){t.preventDefault();var n={showModal:!0,validade:window.validade},a={open:function(){this.validade=window.validade,this.showModal=!0},close:function(){this.showModal=!1},buy:function(){var t=document.querySelector(".buy-button").href;location.href=t},back:function(){this.showModal=!1}};null==window.buyModal?(window.buyModal=new c("tbbqa","#vue-app",n,a),window.buyModal.init()):(window.buyModal.app.validade=window.validade,window.buyModal.app.showModal=!0)}}var u={headers:{},endpoints:{skuDetails:"/api/catalog_system/pvt/sku/stockkeepingunitbyid/",variations:"/api/catalog_system/pub/products/variations/"},req:function(t,n){$.ajax({url:t,type:"GET",headers:this.headers}).success(function(t){n(t)})},getVariations:function(t,n){$.ajax({url:"/api/catalog_system/pub/products/variations/"+t,type:"GET"}).success(function(t){n(t)})},getSkuDetails:function(t,n){$.ajax({url:"https://botiwall.corebiz.com.br/catalog/sku",data:{filter:t,filterType:"stockkeepingunitbyid"},type:"GET"}).success(function(t){n(t)})}},l={attachments:null,init:function(t,n){if(this.hasExpiration(t))for(key in t)this.attachments=t[key].Associated;this.delegates(n)},delegates:function(n){var a=this.attachments;$(".buy-button").on("click",function(t){t.preventDefault(),n(a)})},hasExpiration:function(t){var n=!1;for(var a in t)null!=t[a].Associated[0]&&-1<JSON.stringify(t[a].Associated[0]).indexOf("validade")&&(n=!0);return n},formatDate:function(t){var n=t.split("-"),a=n[1],i=n[2],o={jan:"Janeiro",fev:"Fevereiro",mar:"MarÃ§o",abr:"Abril",mai:"Maio",jun:"Junho",jul:"Julho",ago:"Agosto",set:"Setembro",out:"Outubro",nov:"Novembro",dez:"Dezembro"};return{month:o[a],year:"20"+i,string:o[a]+" de 20"+i}}};$(window).on("load",function(){0<window.location.href.indexOf("idsku")&&function(){var a=setInterval(function(){var t=window.location.href.split("idsku=")[1];t=(t=t.split("&",1))[0];var n=document.querySelector(".flag-"+t);null!=n&&($(".ultima-chance").removeClass("item-active"),$(n).addClass("item-active"),clearInterval(a))},1e3)}()});var d=function(t){try{$(".ultima-chance").removeClass("item-active"),$(".flag-"+t).addClass("item-active"),null==window.attachs?window.validade=null:null==window.attachs[t]?window.validade=null:window.validade=window.attachs[t].string}catch(t){console.error(t)}},c=function(t,n,a,i){this.app=null,this.init=function(){var t={template:'<div class="vue-popup">\n            <transition name="modal">\n                <div class="vue-aux-box">\n                    <div class="vue-overlay" @click="showModal = false" v-bind:class="{ \'active\': showModal }"></div>\n                    <div class="modal-mask" v-show="showModal" v-bind:class="{ \'fade-in-up\': showModal, \'fade-out-down\' : !showModal }">\n                        <div class="modal-container">\n                            <button class="btn-vue-modal-close" @click="showModal = false"><i class="ico-close"></i></button>\n\n                            \x3c!--<slot name="content"></slot>--\x3e\n                            <div>\n                                \x3c!--<h3>PSIU!</h3>--\x3e\n                                <div>\n                                    <p>ei, pera! esse produto é válido até <strong>{{validade}}</strong>, tá?</p>\n                                </div>\n                            </div>\n                            \n                            <button id="modal-back" @click="back">voltar</button>\n                            <button id="modal-comprar" @click="buy">continuar compra</button>\n                        </div>\n                    </div>\n                </div>\n            </transition>\n        </div>',data:function(){return a},methods:i};Vue.component("modal",t),this.app=new Vue({el:n,data:a})},this.open=function(){console.info(this.app)},this.close=function(){}};$(document).ready(function(){try{!function(){var t=new i,n=document.querySelector("#___rc-p-id").value;new o;window.buyModal=null,window.attachs={};var a=window.attachs;console.log(a),window.validate=null,window.buyModalFn=function(){},$(".buy-button").on("click",function(t){window.buyModalFn(t)}),t.getServicesFromAllSkus(n,function(t){var n=null,a=0;for(var i in t)a++,null!=t[i].Associated[0]&&((n=l.formatDate(t[i].Associated[0].Name)).sku=i,e(n,".product-buy-button",".flag-container-validade"),window.attachs[i]=n,window.buyModalFn=s,window.validade=1==a?n.string:null);var o=$("#___rc-p-sku-ids").attr("value").split(",");1==o.length&&d(o[0])})}()}catch(t){console.error(t)}}),$(window).on("skuSelected.vtex",function(t,n,a){d(a.sku)})},{}]},{},[1]);