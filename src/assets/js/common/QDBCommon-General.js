
// FID/**201812112311*/
var menuData = [{
    "text": "Entre ou cadastre-se",
    "link": "https://www.quemdisseberenice.com.br/account/"
},
// {
//     "text": "Ofertas de Aniversário",
//     "link": "https://www.quemdisseberenice.com.br/clube-das-beres",
//     "class": ["__light-turquoise"]
// },
{
    "text": "Boca",
    "menu": [
        {
            "text": "Boca",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "http://www.quemdisseberenice.com.br/maquiagem/boca",
            "class": ["__bold"]
        },
        {
            "text": "Pincel",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/pincel"
        },
        {
            "text": "Batom líquido",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/batom-liquido"
        },
        {
            "text": "Batom",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/batom?PS=24&O=OrderByBestDiscountDESC"
        },
        {
            "text": "Gloss",
            "link": "http://www.quemdisseberenice.com.br/maquiagem/boca/gloss/"
        },
        // {
        //     "text": "Balm",
        //     "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/balm/"
        // },
        {
            "text": "Lápis boca",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/lapis-boca/"
        },
        {
            "text": "Cuidados p/ os lábios",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/boca/cuidado-labial"
        }
    ]
},

{
    "text": "Olhos",
    "menu": [
        {
            "text": "Olhos",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos",
            "class": ["__bold"]
        },
        {
            "text": "Paleta",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/paleta"
        },
        {
            "text": "Cuidados p/ a área dos olhos",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/creme-para-area-dos-olhos"
        },
        {
            "text": "Máscara para cílios",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/mascara/"
        },
        {
            "text": "Delineador",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/delineador/"
        },
        {
            "text": "Lápis",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/lapis/"
        },
        {
            "text": "Sombra",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/sombra/"
        },
        {
            "text": "Primer",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/olhos/primer/"
        },
        {
            "text": "Pigmento e Gliter",
            "link": "http://busca.quemdisseberenice.com.br/busca?q=glitter+e+pigmentos"
        }
    ]
},
{
    "text": "Sobrancelhas",
    "menu": [
        {
            "text": "Sobrancelhas",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas",
            "class": ["__bold"]
        },
        {
            "text": "Paleta",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/paleta"
        },
        // Inativado do Cadastro
        // {
        //     "text": "Máscara",
        //     "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/mascara"
        // },
        {
            "text": "Lápis e caneta",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/caneta"
        },
        {
            "text": "Gel",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/gel"
        },
        {
            "text": "Pinça",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/pinca"
        },
        {
            "text": "Pincel",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/sobrancelhas/pincel"
        }
    ]
},
{
    "text": "Pele",
    "menu": [
        {
            "text": "Pele",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele",
            "class": ["__bold"]
        },
        {
            "text": "Hidratante Facial",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/hidratante-facial"
        },
        {
            "text": "Base",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/base/"
        },
        {
            "text": "Pó facial",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/po-facial/"
        },
        {
            "text": "Blush",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/blush/"
        },
        {
            "text": "Corretivo",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/corretivo/"
        },
        {
            "text": "Iluminador",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/iluminador/"
        },
        {
            "text": "Bronze",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/bronze/"
        },
        {
            "text": "Primer",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/primer/"
        },
        {
            "text": "BB e CC Creme",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/bb-e-cc-creme"
        },
        {
            "text": "Contorno",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/contorno-facial"
        },
        {
            "text": "Demaquilante",
            "link": "https://www.quemdisseberenice.com.br/maquiagem/pele/demaquilante/"
         }
        // {
        //     "text": "Cuidados p/ pele",
        //     "link": "https://www.quemdisseberenice.com.br/cuidados/rosto"
        // }
        // {
        //     "text": "Pincel",
        //     "link": "http://busca.quemdisseberenice.com.br/busca?q=pincel"
        // }
    ]
},
{
    "text": "Unhas",
    "menu": [
        {
            "text": "Unhas",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "http://www.quemdisseberenice.com.br/unhas",
            "class": ["__bold"]
        },
        {
            "text": "Esmaltes",
            "link": "http://www.quemdisseberenice.com.br/unhas/esmaltes"
        },
        {
            "text": "Cuidados com as unhas",
            "link": "http://busca.quemdisseberenice.com.br/busca?q=cuidado+para+unhas"
        }
    ]
},
{
    "text": "Perfumaria",
    "menu": [
        {
            "text": "Perfumaria",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/perfumaria/",
            "class": ["__bold"]
        },
        {
            "text": "Perfumaria",
            "link": "https://www.quemdisseberenice.com.br/perfumaria/"
        },
        {
            "text": "Corpo e banho",
            "link": "https://www.quemdisseberenice.com.br/corpo-e-banho/"
        }
    ]
},
{
    "text": "Cabelos",
    "menu": [
        {
            "text": "Cabelos",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/cabelos/",
            "class": ["__bold"]
        },
        {
            "text": "Coloração",
            "link": "https://www.quemdisseberenice.com.br/cabelos/pra-colorir"
        },
        {
            "text": "Estilização",
            "link": "https://www.quemdisseberenice.com.br/cabelos/pra-estilizar"
        },
        {
            "text": "Cuidados c/ os cabelos",
            "link": "https://www.quemdisseberenice.com.br/cabelos/pra-por-e-tirar"
        }
    ]
},
{
    "text": "Acessórios",
    "menu": [
        {
            "text": "Acessórios",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/acessorios-para-maquiagem/",
            "class": ["__bold"]
        },
        {
            "text": "Para os cílios",
            "link": "https://www.quemdisseberenice.com.br/acessorios-para-maquiagem/para-os-cilios"
        },
        {
            "text": "Pinceis e Esponjas",
            "link": "https://www.quemdisseberenice.com.br/acessorios-para-maquiagem/pinceis-e-esponjas"
        },
        {
            "text": "Nécessaire e Organizadores",
            "link": "https://www.quemdisseberenice.com.br/acessorios-para-maquiagem/necessaire-e-organizadores"
        },
        {
            "text": "Espelhos",
            "link": "https://www.quemdisseberenice.com.br/acessorios-para-maquiagem/espelhos/"
        }
    ]
},
{
    "text": "Kits e presentes",
    "menu": [
        {
            "text": "Kits e presentes",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/kits-e-presentes",
            "class": ["__bold"]
        },
        {
            "text": "Kits",
            "link": "https://www.quemdisseberenice.com.br/kits-e-presentes/kits"
        },
        {
            "text": "Caixas para presente",
            "link": "https://www.quemdisseberenice.com.br/kits-e-presentes/embalagens-pra-presente"
        }
    ]
},
{
    "text": "Dicas",
    "menu": [
        {
            "text": "Dicas",
            "class": ["__arrow-left","__close-submenu"]
        },
        {
            "text": "Ver tudo",
            "link": "https://www.quemdisseberenice.com.br/tutoriais-dicas-de-beleza",
            "class": ["__bold"]
        },
        {
            "text": "Sobrancelha",
            "link": "https://www.quemdisseberenice.com.br/maquiagem-para-sobrancelhas"
        },
        {
            "text": "Base",
            "link": "https://www.quemdisseberenice.com.br/qual-a-melhor-base"
        }
        ,
        {
            "text": "Batom",
            "link": "https://www.quemdisseberenice.com.br/escolha-o-seu-batom"
        },
        {
            "text": "Máscara",
            "link": "https://www.quemdisseberenice.com.br/guia-mascara-pra-cilios"
        },
        {
            "text": "Paletas de Sombras",
            "link": "https://www.quemdisseberenice.com.br/paletas-de-sombras"
        },
        {
            "text": "Base Cushion",
            "link": "https://www.quemdisseberenice.com.br/nova-base-cushion"
        },
        {
            "text": "Monte sua Paleta de Sombras",
            "link": "https://www.quemdisseberenice.com.br/monte-sua-paleta-de-sombras"
        },
        {
            "text": "Família Instamatte",
            "link": "https://www.quemdisseberenice.com.br/familia-instamatte"
        }
    ]
},
{
    "text": "Promoções",
    "link": "https://www.quemdisseberenice.com.br/promocao",
    "class": ["__light-turquoise"]
},
{
    "text": "Lançamentos",
    "class": ["__light-turquoise"],
    "link": "https://www.quemdisseberenice.com.br/lancamentos"
},
{
    "text": "Clube das berês",
    "class": ["__light-turquoise"],
    "link": "https://www.quemdisseberenice.com.br/clube-das-beres"
},
{
    "text": "Retorna Berê",
    "class": ["__light-turquoise"],
    "link": "https://www.quemdisseberenice.com.br/retorna-bere"
},
{
    "text": "Ajuda",
    "class": ["__dark"],
    "link": "https://www.quemdisseberenice.com.br/institucional/atendimento"
}
];
/*accentsTidy*/
String.prototype.accentsTidy = function () { 
    var a = this.trim(); 
    a = a.replace(/,/g, " "); 
    a = a.replace(/\s+/g, " "); 
    a = a.replace(/(\s|&|\?)/g, "-"); 
    a = a.replace(/\u00e7/g, "c"); 
    a = a.replace(/\u00f1/g, "n"); 
    a = a.replace(/\u00c7/g, "C"); 
    a = a.replace(/\u00d1/g, "N"); 
    a = a.replace(/[\u00c3\u00c2\u00c1\u00c0\u00c4]/g, "A"); 
    a = a.replace(/[\u00c9\u00c8\u00cb]/g, "E"); 
    a = a.replace(/[\u00cd\u00cc\u00cf]/g, "I"); 
    a = a.replace(/[\u00d5\u00d4\u00d3\u00d2\u00d6]/g, "O"); 
    a = a.replace(/[\u00da\u00d9]/g, "U"); 
    a = a.replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]/g, "a"); 
    a = a.replace(/[\u00e8\u00e9\u00ea\u00eb]/g, "e"); 
    a = a.replace(/[\u00ec\u00ed\u00ee\u00ef]/g, "i"); 
    a = a.replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6]/g, "o"); 
    a = a.replace(/[\u00f9\u00fa\u00fb\u00fc]/g, "u"); return a };
    var runOnViewportScroll = (function (Cb,Namespace,Multiplier) {
    'use strict'
    return function (Cb,Namespace,Multiplier) {
        if("function"!==typeof Cb||"undefined"===typeof Namespace){ return false; }
        // viewport height * m = how much to scroll before run
        var m = Multiplier||1; 
        var ns = 'scroll.'+Namespace;
        var vph = Math.floor($(window).height()*m);
        var f = function () {
            var wst = $(window).scrollTop();
            wst>vph
                &&$(window).off(ns)
                &&"function"===typeof Cb&&Cb();
        };
        $(window).off(ns).on(ns,f);
    };
})();

var getSearchQuery = function(){ return document.location.search.replace(/\?/,'').split(/&/).map(function(d){ var dt = d.split(/=/); var obj = {}; obj[dt[0]] = dt[1]; return obj; }); };
// var getUtmSource = function(){ var q = getSearchQuery(); if(q.length>0){ return q.reduce(function(d){ if(!!d.utm_source) return "" }); } return []; };
/** 201810290916 */
var Utls = function (e, h, k, l) {
    return function () {
        var c = this;
        c.getSkus = function (a) {
            var b = e.Deferred();
            if ("undefined" === a) return b.reject("Missing product id."), b.promise();
            if (c.getSkus.data[a]) return b.resolve(c.getSkus.data[a]), b.promise();
            vtexjs.catalog.getProductWithVariations(a).fail(function (d) {
                c.getSkus.data[a] = [];
                b.reject("Product id not found.")
            }).done(function (d) {
                c.getSkus.data[a] = {
                    id: d.productId,
                    name: d.name,
                    skus: d.skus.slice(),
                    salesChannel: d.salesChannel,
                    available: d.available
                };
                b.resolve(c.getSkus.data[a])
            });
            return b.promise()
        };
        c.getSkus.data = {};
        c.getSkuList = function (a) {
            if ("undefined" === a || "undefined" !== a && !(a instanceof Array)) return a = new Promise(function (a, c) {
                c("Missing list of product id. eg. [1, 45, 83].")
            }), Promise.all([a]);
            var b = [],
                d = {};
            e.each(a, function (a, f) {
                var g = new Promise(function (a, b) {
                    c.getSkuList.data[f] ? a(c.getSkuList.data) : c.getSkus(f).then(function (b) {
                        d[f] = e.extend({}, b);
                        c.getSkuList.data = e.extend({}, d, c.getSkuList.data);
                        a(c.getSkuList.data)
                    }, function (a) {
                        b("Product id not found.")
                    })
                });
                b.push(g)
            });
            return Promise.all(b)
        };
        c.getSkuList.data = {};
        c.getInfo = function (a) {
            var b = e.Deferred();
            if ("undefined" === a) return b.reject("Missing product id."), b.promise();
            var d = "/api/catalog_system/pub/products/search/?fq=productId:" + a;
            if (c.getInfo.data[a]) return b.resolve(c.getInfo.data[a]), b.promise();
            e.ajax({
                url: d,
                success: function (d) {
                    c.getInfo.data[a] = d;
                    b.resolve(c.getInfo.data[a])
                },
                error: function (d) {
                    c.getInfo.data[a] = [];
                    b.reject("Product id not found.")
                }
            });
            return b.promise()
        };
        c.getInfo.data = {};
        c.addProducts =
            function (a) {
                var b = e.Deferred();
                if ("undefined" === a || "undefined" !== a && !(a instanceof Array)) return b.reject("Missing array of objects. eg. [{ id: 1 }, { id: 2, quantity: 2 }]"), b.promise();
                var c = [];
                e.each(a, function (a, b) {
                    var d = Object.assign({
                        id: 0,
                        quantity: 1,
                        seller: 1
                    }, b);
                    c.push(d)
                });
                vtexjs.checkout.addToCart(c).fail(function (a) {
                    b.reject(a)
                }).done(function (a) {
                    b.resolve(a)
                });
                return b.promise()
            };
        "undefined" !== typeof console && "undefined" !== typeof console.log && (c.__log = console.log);
        return !0
    }
}(jQuery, window,
    document);
/** insert scripts that should run in all pages */
var CreateMenu = (function ($, window, document, undefined) {
    "use strict";
    var mountMenu = function (arr, html) {
        if (!html) {
            html = [];
        }
        html.push('<ul>');
        arr.forEach(function (menu) {
            if (menu.off) return true;
            var menuLink = '<a>',
                li = '<li>',
                menuLinkClosingTag = "</a>";
            if (menu.link) {
                menuLink = '<a href="' + menu.link + '">';
            }
            if (menu.class && menu.class instanceof Array) {
                li = '<li class="' + menu.class.join(" ") + '">';
            }
            html.push(li + menuLink + menu.text + menuLinkClosingTag);
            if (menu.menu) {
                mountMenu(menu.menu, html);
            }
            html.push('</li>');
        });
        html.push('</ul>');
        return html.join("");
    };
    var CreateMenu = function (Data) {
        var menuHtml = mountMenu(Data);
        return menuHtml;
    };
    return CreateMenu;
})(jQuery, window, document);
/*mini cart list of products*/
(function ($, window, document, undefined) {
    var _mProdsTemplate = {
        cart: "<div class='mr-minicart'>{%CART%}</div>",
        promo: "<div class=\"mr-shipping\"><div class=\"mr-shipping-lbl-container\"><span class=\"mr-shipping-lbl\">{%PROMOMSG%}</span></div><div class=\"mr-shipping-pb-container\" {%PROMOBAR%}><span class=\"mr-progress-bar\"><small {%PROMOSTYLE%}></small></span></div> </div>",
        footer: "<div class='mr-footer'>{%FOOTER%}</div>",
        totals: "<div class='mr-totals'>" +
            "<div class='mr-total mr-discounts'><span class='mr-lbl'>Descontos:</span><span class='mr-discount-val'>{%DISCOUNT%}</span></div>" +
            "<div class='mr-total'><span class='mr-lbl'>Total:</span><span class='mr-total-val'>{%TOTAL%}</span></div>" +
            "<div class='mr-goto-cart'><a href='/checkout/#/cart'>Fechar pedido</a></div>" +
            "</div>",
        list: "<div class='mr-prod-list-wrapper'><div class='mr-prod-list'>{%ITEMS%}</div></div>",
        item: "<div class='mr-prod-item'>" +
            "<a class='mr-link' href='{%LINK%}'>" +
            "<span class='mr-img'><img src='{%IMG%}'/></span>" +
            "<span class='mr-prod-brand'>{%BRAND%}</span>" +
            "<span class='mr-prod-name'>{%NAME%}</span>" +
            "<span class='mr-prod-qty'>Qtde: <small>{%QTY%}</small></span>" +
            "<span class='mr-prod-price'><em>{%PRICE%}</em></span>" +
            "</a>" +
            "<a class='mr-rm __close-icon-black' {%REMOVE%}>X</a>" +
            "</div>",
        emptyCart: "<div class=\"mr-empty\"><div class=\"mr-msg\">Não há produtos em sua sacola.</div><div class=\"mr-suggestions\"></div></div>"
    };

    var mProdsList = function (elem, options) {
        var _mProdsListContainer = elem;
        var mProdsOpt = $({}, options);
        var _mProdsList = {
            qtyProds: 0,
            discounts: 0,
            totalPrice: 0,
            items: [],
            on_off_class: 'cart-show',
            formatMoney: function (number, a, d, c) {
                var b = number;
                a = isNaN(a = Math.abs(a)) ? 2 : a;
                d = void 0 == d ? "." : d;
                c = void 0 == c ? "," : c;
                var h = 0 > b ? "-" : "",
                    g = parseInt(b = Math.abs(+b || 0).toFixed(a)) + "",
                    f = 3 < (f = g.length) ? f % 3 : 0;
                return h + (f ? g.substr(0, f) + c : "") + g.substr(f).replace(/(\d{3})(?=\d)/g, "$1" + c) + (a ? d + Math.abs(b - g).toFixed(a).slice(2) : "")
            },
            init: function () {
                if (_mProdsList.get.vtexjs()) {
                    _mProdsList.get.items();
                    
                }
                return true;
            },
            set: {
                events: function () {
                    var eventName = 'click.Minicart';
                    $(_mProdsListContainer).find('.close').unbind(eventName).bind(eventName, function () {
                        $('html').removeClass(_mProdsList.on_off_class);
                    });
                    return true;
                },
                hasProds: function () {
                    var qtyItems = _mProdsListContainer.data('items') || 0;
                    if (qtyItems > 0) {
                        $('html').addClass('cart-has-products');
                    } else {
                        $('html').removeClass('cart-has-products');
                    }
                    return true;
                }
            },
            get: {
                vtexjs: function () {
                    if ("object" !== typeof (vtexjs)) {
                        $.getScript('http://io.vtex.com.br/vtex.js/2.3.0/vtex.js', function () {
                            _mProdsList.init();
                        });
                    } else {
                        return true;
                    }
                    return true;
                },
                items: function () {
                    if ("undefined" === typeof vtexjs) return false;
                    vtexjs.checkout.getOrderForm().then(function (orderForm) {
                        window.order = orderForm;
                        _mProdsList.items = orderForm.items;
                        _mProdsList.discounts = orderForm.totalizers && orderForm.totalizers.length>0 && orderForm.totalizers[1] != undefined && orderForm.totalizers[1].hasOwnProperty("id") & orderForm.totalizers[1].id == "Discounts" && _orderForm.totalizers[1].value != 0?orderForm.totalizers[1].value:0;
                        // console.log(_mProdsList.discounts)
                        _mProdsList.totalPrice = orderForm.totalizers&&orderForm.totalizers.length>0&&orderForm.totalizers[0].value?orderForm.totalizers[0].value:0;
                        _mProdsListContainer.data('total', 1 * (_mProdsList.totalPrice / 100));
                        _mProdsList.mount();
                    });
                    return true;
                },
                money: function (number) {
                    return "R$ " + _mProdsList.formatMoney(number, 2, ",", ".");
                },
                promo: function () {
                    var cartData = $('._mini-cart-data script').text().split('\n');
                    if(cartData.length<3) { 
                        return {
                            msg: "",
                            value: 0,
                            percentage: 0,
                            style: ""
                        };
                    } else {
                        var msg = cartData[1], val = 1*cartData[0]*100;
                        if(!isFinite(val)) {return false;}
                        var percentage = Math.round(_mProdsList.totalPrice / val * 100);
                        var res = val >= _mProdsList.totalPrice?(val - _mProdsList.totalPrice)/100:0;
                        // console.log('res',res)
                        if(res>0){
                            msg = msg.replace(/{%VALOR%}/,_mProdsList.get.money(res));
                        }
                        var style = "style=\"width:" + percentage + "%;\"";
                        if(percentage>=100){
                            msg = cartData[2];
                        }
                    }
                    return {
                        msg: msg,
                        value: val,
                        percentage: percentage,
                        style: style
                    };
                }
            },
            mount: function () {
                var items = '', item = '';
                var qtyItems = 0;
                if (_mProdsList.items.length > 0) {
                    var index = _mProdsList.items.length - 1;
                    for (var i in _mProdsList.items.reverse()) {
                        if (_mProdsList.items.hasOwnProperty(i)) {
                            var price = _mProdsList.get.money(_mProdsList.items[i].price / 100);
                            qtyItems = qtyItems + (1 * _mProdsList.items[i].quantity);
                            item = _mProdsTemplate.item
                                .replace(/{%LINK%}/, _mProdsList.items[i].detailUrl)
                                .replace(/{%IMG%}/, _mProdsList.items[i].imageUrl)
                                .replace(/{%BRAND%}/, _mProdsList.items[i].additionalInfo.brandName)
                                .replace(/{%NAME%}/, _mProdsList.items[i].name)
                                .replace(/{%QTY%}/, _mProdsList.items[i].quantity)
                                .replace(/{%PRICE%}/, price);
                                item = item.replace(/mr-prod-item/,"mr-prod-item _mr-prod-item-"+index);
                                if(_mProdsList.items[i].isGift){
                                    item = item.replace(/mr-prod-item/,"mr-prod-item _gift")
                                        .replace(/{%REMOVE%}/, 'onclick="mProdsList.gift(' + index + ');"');
                                } else {
                                    item = item.replace(/{%REMOVE%}/, 'onclick="mProdsList.del(this,' + index + ');"');
                                }
                                items += item;
                            index--;
                        }
                    }
                    var cart = _mProdsTemplate.list
                        .replace('{%ITEMS%}', items);
                    var promo = _mProdsList.get.promo();
                    var footerContent = '';
                    if (promo && isFinite(promo.value) && promo.value>0) {
                        footerContent += _mProdsTemplate.promo
                            .replace('{%PROMOMSG%}', promo.msg)
                            .replace('{%PROMOSTYLE%}', promo.style);
                        if(promo.percentage>=100){
                            footerContent = footerContent.replace('{%PROMOBAR%}', "style=\"display:none;\"");
                        }
                    }
                    var totalValue = 'R$'+((_mProdsList.totalPrice / 100) + (_mProdsList.discounts / 100)).toFixed(2).replace('.',',');
                    var discountValue = "-R$"+(_mProdsList.discounts / 100).toFixed(2).replace('.',',').replace('-','')

                    footerContent += _mProdsTemplate.totals
                        .replace('{%TOTAL%}', totalValue)
                        .replace('{%DISCOUNT%}', discountValue);
                    cart += _mProdsTemplate.footer.replace('{%FOOTER%}', footerContent);
                    _mProdsListContainer.removeClass('__cart-empty __cart-loading');
                } else {
                    cart = _mProdsTemplate.emptyCart;
                    _mProdsListContainer.removeClass('__cart-loading');
                    _mProdsListContainer.addClass('__cart-empty');
                }
                cart = _mProdsTemplate.cart.replace('{%CART%}', cart);
                var _cart = $(cart);
                _cart.find(".mr-prod-item:not('._gift')").wrapAll('<div class="mr-prod-items"></div>');
                _cart.find("._gift").wrapAll('<div class="mr-gifts"></div>');
                _cart.find('.mr-gifts').prepend('<div class="mr-gifts-lbl">Você ganhou!</div>');
                _mProdsListContainer.data('items', qtyItems);
                _mProdsListContainer.html(_cart);
                _mProdsList.set.hasProds();
                _mProdsList.set.events();
                return true;
            },
            del: function (target,ndx) {
                if ("undefined" === typeof vtexjs) return false;
                $(target).parent().addClass('__mr-deleting');
                vtexjs.checkout.getOrderForm().then(function (orderForm) {
                    var item = orderForm.items[ndx];
                    item.index = ndx;
                    return vtexjs.checkout.removeItems([item]);
                }).done(function (orderForm) {
                    _mProdsList.refresh();
                    _mProdsList.set.hasProds();
                });
                return true;
            },
            gift: function (ndx) {
                // console.log('Brinde não pode ser removido.');
                return true;
            },
            refresh: function () {
                _mProdsList.init();
                return true;
            }
        };
        _mProdsList.init(options);
        window.mProdsList = {
            init: _mProdsList.init,
            refresh: _mProdsList.refresh,
            items: function () {
                return _mProdsListContainer.data('items');
            },
            total: function () {
                return _mProdsListContainer.data('total');
            },
            del: _mProdsList.del,
            gift: _mProdsList.gift
        };
    };
    $.fn.mProdsList = function (options) {
        return mProdsList(this, options);
    };
})(jQuery, window, document);
/*mMinicart*/
/*set up mini cart and change values*/
(function ($, window, document, undefined) {
    $.fn.mMinicart = function (options) {
        var _elem = $(this);
        var mMinicartOpts = $.extend({
            'descontos': '.mr-discount-val',
            'items': '.amount-items-em',
            'total': '.total-cart-em'
        }, options);
        var _mMinicart = {
            init: function () {
                _elem.mProdsList();
                return true;
            },
            refresh: function () {
                mProdsList.refresh();
                $(mMinicartOpts.descontos).text(mProdsList.discounts())
                $(mMinicartOpts.items).text(mProdsList.items());
                $(mMinicartOpts.total).text(mProdsList.total());

                return true;
            }
        };
        _mMinicart.init();
        window.mMinicart = {
            refresh: _mMinicart.refresh,
            items: function () {
                return mProdsList.items();
            },
            total: function () {
                return mProdsList.total();
            }
        };
    };
})(jQuery, window, document);
var SuperMenu = (function ($, window, document, undefined) {
    "use strict";

    /*menu mobile slide options to the left/right*/
    var SuperMenu = {
        mainContainer: '.SuperMenu',
        speed: 200,
        padding: 0,
        onOffClass: '__menu-show',
        init: function () {
            SuperMenu.set.events.all();
            SuperMenu.set.hasChildren();
            return true;
        },
        set: {
            events: {
                all: function () {
                    SuperMenu.set.events.menu();
                    SuperMenu.set.events.openMenu();
                    SuperMenu.set.events.closeMenu();
                    return true;
                },
                menu: function () {
                    var eventName = 'click.Interface';
                    $('._super-menu a')
                        .off(eventName).on(eventName, function () {
                            var _item = $(this);
                            if (_item.siblings().length > 0) {
                                $('._super-menu .__super-menu-last')
                                    .removeClass('__super-menu-last');
                                _item.addClass('__super-menu-last');
                                $('.__super-menu-on').removeClass('__super-menu-on');
                                _item.parent().addClass('__super-menu-on');
                                $('._super-menu-options').html(_item.clone(false));
                                SuperMenu.set.events.menuSelected();
                                $(SuperMenu.mainContainer).parent().addClass('__submenu-show');
                            }
                            $('._super-menu').scrollTop(0);
                            $('.SidebarLeft').scrollTop(0);
                        });
                    $('._super-menu .__close-submenu').off('click.Interface').on('click.Interface', function (e) {
                        SuperMenu.close.submenu();
                    });
                    return true;
                },
                menuSelected: function () {
                    var eventName = 'click.Interface';
                    $('._super-menu-options a').not('.__act').addClass('__act')
                        .off(eventName).on(eventName, SuperMenu.close.submenu);
                    return true;
                },
                openMenu: function () {
                    $('html').off('open.SuperMenu').on('open.SuperMenu', function (e) {
                        if ($('html').hasClass(SuperMenu.onOffClass)) {
                            SuperMenu.close.menu();
                        } else {
                            SuperMenu.open.menu();
                        }
                    });
                    return true;
                },
                closeMenu: function () {
                    $('html').off('close.SuperMenu').on('close.SuperMenu', function (e) {
                        SuperMenu.close.menu();
                    });
                    return true;
                }
            },
            hasChildren: function () {
                $('._super-menu a').each(function (x, i) {
                    if ($(i).siblings().length > 0)
                        $(i).addClass('__hasChildren');
                });
                return true;
            }
        },
        open: {
            menu: function () {
                $('html').addClass(SuperMenu.onOffClass);
                return true;
            }
        },
        close: {
            menu: function () {
                $('html').removeClass(SuperMenu.onOffClass);
                $('.__super-menu-last').removeClass('__super-menu-last');
                $('.__super-menu-on').removeClass('__super-menu-on');
                SuperMenu.close.submenu();
                return true;
            },
            submenu: function () {
                var _item = $('._super-menu-options > *');
                $('.__submenu-show').removeClass('__submenu-show');
                $('.__super-menu-on').removeClass('__super-menu-on');
            }
        }
    };
    // $(SuperMenu.init);

    return SuperMenu;
})(jQuery, window, document);
(function ($, window, document, undefined) {
    "use strict";
    var updateItemsMiniCart = function () {
        vtexjs.checkout.getOrderForm().done(function (orderForm) {
            window._orderForm = orderForm;
            var qty = 0;
            $(orderForm.items).each(function (ndx, item) {
                if (!item.isGift) {
                    qty += item.quantity;
                }
            });
            if (isFinite(qty)) {
                $('.__cart-link a span').text(qty);
            }
        });
        
        return true;
    };
    function showCouponActive() {
        const title = document.querySelector('.__cartTitle')
        const couponActive = vtexjs.checkout.orderForm.marketingData.coupon;
        if(couponActive != null){
            title.textContent = `Cupom ativo: ${couponActive}`
        }
    }
    var isLogged = function () {
        var logged = false;
        $(dataLayer).each(function(ndx,item){
            if(!!item.visitorLoginState){
                logged=item.visitorLoginState;
            }
        });
        return logged;
    };
    var loggedOnOff = function () {
        if(isLogged()){
            $('html').addClass('__user-logged');
        } else {
            $('html').removeClass('__user-logged');
        }
        return true;
    };
    var getBannerPromoHeight = function () {
        var _bannerPromo = $('._banner-promo');
        if (_bannerPromo.length <= 0) return 0;
        return _bannerPromo.outerHeight();
    };
    var slideStripBannerOnOff = function () {
        var bc = $('._banner-promo').children().length;
        if(bc>0) {$('._banner-promo').addClass('_on');}
        if(bc>1) {$('._banner-promo').addClass('_animated');}
        return true;
    };
    var setTopLinksOnOff = function () {
        $('._top-bar-links > * > a').off('click.Interface').on('click.Interface', function (e) {
            e.preventDefault();
            e.stopPropagation();
            var same = $(this).parent().hasClass('__on');
            $('._top-bar-links > *').removeClass('__on');
            if (!same) {
                $(this).parent().addClass('__on');
            }
        });
        $(window).off('click.Interface_TL').on('click.Interface_TL',function (e) {
            $('._top-bar-links > *').removeClass('__on');
        });
        return true;
    };
    var setLinksOnOff = function () {
        $('._sidebarleft-links').each(function (ndx, item) {
            $(item).find('> *:first').off('click.Interface').on('click.Interface', function (e) {
                $(this).parent().toggleClass('__links-show');
            });
        });
        return true;
    };
    var setBannerPromo = function () {
        var _bannerPromo = $('._banner-promo');
        if (_bannerPromo.length <= 0) return false;
        _bannerPromo.off('click.BannerPromo').on('click.BannerPromo', function (e) {
            $('html').addClass('__promo-banner-off');
        });
        return true;
    };
    var miniCartEvents = function () {
        $('html').off('open.MiniCart').on('open.MiniCart',function (e) {
            e.preventDefault();
            
            if ("function" === typeof $.fn.mMinicart) {
                $('._minicartBody').mMinicart();
                $('html').addClass('__cart-show');
                
            }
        });
        $('html').off('close.MiniCart').on('close.MiniCart',function (e) {
            $('html').removeClass('__cart-show');
        });
        $('.__cart-link').off('click.Cart').on('click.Cart', function (e) {
            e.preventDefault();
            $('html').trigger('open.MiniCart');
            // showCouponActive();
            
        });
        $('.__close-cart').off('click.Cart').on('click.Cart', function (e) {
            e.preventDefault();
            $('html').trigger('close.MiniCart');
        });
        return true;
    };
    var superMenuStart = {
        _menuContainer: '.SuperMenu ._super-menu',
        init: function () {
            if (superMenuStart.menu.mount()) {
                superMenuStart.set.events();
            }
            return true;
        },
        set: {
            events: function () {
                superMenuStart.set.menu.open();
                superMenuStart.set.menu.close();
                return true;
            },
            menu: {
                open: function () {
                    $('._menu-cat').off('click.Menu').on('click.Menu', function (e) {
                        e.preventDefault();
                        $('html').trigger('open.SuperMenu');
                    });
                    return true;
                },
                close: function () {
                    $('._super-menu-close').off('click.Menu').on('click.Menu', function () {
                        $('html').trigger('close.SuperMenu');
                    });
                    return true;
                }
            }
        },
        menu: {
            mount: function () {
                if ("function" !== typeof CreateMenu) return false;
                var menu = CreateMenu(menuData);
                $(superMenuStart._menuContainer).html(menu);
                return true;
            }
        }
    };
    var addListenerToAllFloats = function () {
        $('html').off('close.AllFloats').on('close.AllFloats',function (e) {
            $('html').trigger('close.SuperMenu');
            $('html').trigger('close.MiniCart');
            $('._top-bar .__on').removeClass('__on');
        });
    };
    var addOverlay = function () {
        var _overlay = $('<div class="__overlay"></div>');
        if($('body .__overlay').length>0) _overlay = $('body .__overlay');
        _overlay.html('<div class="__overlay-bkg"></div>');
        _overlay.off('click.Interface')
            .on('click.Interface',function(e){
                $('html').trigger('close.AllFloats');
            });
        $('body').filter(function () {
            return $('.__overlay').length<=0
        }).append(_overlay);
        return true;
    };
    var fixTopHeader = function () {
        $('html').addClass('_d-top');
        $('input.search-btn').addClass('_d-search');
        $('._header').removeClass('_d-top');
        return true;
    };
    var collapseHeaderOnOff = function () {   
        $(window).off('scroll').on('scroll',function(){
            
            var _top = $(window).scrollTop();
            if(_top>30){ 
                $('html').removeClass('_d-top');
                $('input.search-btn').removeClass('_d-search');
            } else { 
                $('html').addClass('_d-top'); 
                $('input.search-btn').addClass('_d-search');
                $('._header-search-bar').removeClass('activeHeaderSearch')
            }
        });
        return true;
    };
    var blackfridayUTM = function () {
        if(/blackfriday/.test(getUtmSource().utm_source)) $('html').addClass('_black-friday');
        return true;
    };

    var startHomeScripts = function () {
        if($('header._header').length<0) return false; // no header, nothing to do
        if(/utm_source=newheader/.test(document.location.search)) {$('header.header').remove();} // remover esta linha em produ��o
        fixTopHeader();
        loggedOnOff();
        addListenerToAllFloats();
        addOverlay();
        superMenuStart.init();
        SuperMenu.init();
        miniCartEvents();
        setBannerPromo();
        setLinksOnOff();
        setTopLinksOnOff();
        slideStripBannerOnOff();
        collapseHeaderOnOff();
        updateItemsMiniCart();
        // blackfridayUTM();
        
        return true;
    };
    $(window).on('load',startHomeScripts);
    
    return {
        closeAllFloats: function (e) {
            $('html').trigger('close.AllFloats');
        }
    };
    
})(jQuery, window, document);
$( document ).ready(function() {
    $('input.search-btn').on('click', function () {
        if(!$(this).hasClass('_d-search')){
            event.preventDefault();
            $('._header-search-bar').toggleClass('activeHeaderSearch');
            $('.search-field').focus();
        } else {
            $('._header-search-bar').removeClass('activeHeaderSearch');
        }
    });
    if($(window).width()<768){
        $('input.search-btn').on('click', function () {
            $('._header-search-bar').toggleClass('activeHeaderSearchMOB');
        });
        // setTimeout(function(){ $(".slick-dots li")[0].click(); }, 500);
        // setTimeout(function(){ $("body").click(); }, 500);
    }
});


function menuBuscaNeemu() {
    const searchBar = $('._header-search-bar');
    const buscaNeemu = $('.ac-container');
    const closeMenu = $('.ac-overlay');
    const body = $('body'); 

    searchBar.append(buscaNeemu);
    searchBar.on('click',() => {
        buscaNeemu.addClass('lr-search-visible');
        closeMenu.addClass('lr-search-visible');
    })
    closeMenu.on('click', () => {
        if(BrowserVendor == 'safari/webkit'){
            try{
                buscaNeemu.removeClass('lr-search-visible');
                closeMenu.removeClass('lr-search-visible');
                console.log("search off working on ios");
            }catch(e){
                console.log(e);
            }
        }else{
            if(body.hasClass('nm-noscroll')){
                buscaNeemu.removeClass('lr-search-visible');
                closeMenu.removeClass('lr-search-visible');
            }
        }
    })
}
$(window).on('load', menuBuscaNeemu);
// INICIO CONTADOR
function cronometro(countdown, dateini, dateend, fretegratis, text, bgcolor, link) {
    var countDownDate,
        dateinitial = new Date(dateini),
        datefinal = new Date(dateend);
    var now = new Date().getTime(); // Set the date we're counting down to
  
    // function getQueryStringValue (key) {  
    //     return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
    // }  
    if (now < dateinitial.getTime()) {
      //console.log("Cronometro começaa: " + dateinitial);
    } else if(now < datefinal.getTime()) {
    $(".counter").css("display", "flex");
    if(fretegratis == true){
        $(".counter .frete-gratis").css("display", "initial");
    
        $('.counter .frete-gratis').addClass('animate');
    
        $('.frete-gratis circle').each(function(){
            var comprimento = $(this).get(0).getTotalLength();
            var comprimentoArredondado = Math.round(comprimento);
            $(this).attr('stroke-dasharray', comprimentoArredondado);
            $(this).attr('stroke-dashoffset', comprimentoArredondado);
        });
    }else{
        $(".counter .frete-gratis").css("display", "none");
    }
    $(".counter .text-counter").html(text);
    if(link != null || link != "" || document.querySelector(".counter-link") != null){
        document.querySelector(".counter-link").setAttribute("href", link);
    }
    $(document).ready(function(){
        if (countdown == "before") {
            countDownDate = new Date(dateend).getTime();
        } else {
            countDownDate = new Date(dateend).getTime();
        } // Update the count down every 1 second
    
    
        var timerwindow;
    
        //   if (window.innerWidth <= 720) {
        //     timerwindow = "timermobile";
        //     $(".mobile-card .banner-home:first a").append($(".mobile-card .counter"));
        //   } else {
            timerwindow = "timerdesk";
        //   }
    
        var x = setInterval(function () {
            // Get todays date and time
            now = new Date().getTime(); // Find the distance between now and the count down date
    
            var distance = countDownDate - now;
            var distanceinitial = countDownDate - dateinitial.getTime(); // Time calculations for days, hours, minutes and seconds
    
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor(distance % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));
            var minutes = Math.floor(distance % (1000 * 60 * 60) / (1000 * 60));
            var seconds = Math.floor(distance % (1000 * 60) / 1000); // SET WIDTH OF BAR
    
            var hoursdiff = Math.floor(distance / 36e5);
            var width = distance / 36e5 / (distanceinitial / 36e5) * 100;
            document.querySelector(".counterbar_active").style.width = width + "%"; // Display the result in the element with id="demo"
            document.querySelector(".counterbar").style.backgroundColor = bgcolor;
            // document.getElementById("timer").innerHTML = '<span>' + days + '<p>dia</p></span><span>:</span><span>' + hours + '<p>horas</p></span><span>:</span><span>'
    
            if (countdown == "before") {
            document.getElementById(timerwindow).innerHTML = '<span>' + hoursdiff + '<p>h</p></span><span>:</span><span>' + minutes + "<p>m</p></span>";
            } else {
            document.getElementById(timerwindow).innerHTML = '<span>' + hoursdiff + '<p>h</p></span><span>:</span><span>' + minutes + '<p>m</p></span><span>:</span><span>' + seconds + "<p>s</p></span>";
            } // If the count down is finished, write some text 
    
    
            if (distance < 0) {
            clearInterval(x);
            document.getElementById(timerwindow).innerHTML = "00:00:00";
            $(".counter").css("display", "none");
            } else if (distance > 0 && minutes == 0 && seconds < 2) {
            location.reload();
            }
        }, 1000);
    });
    $("span.counter").css("background-color", bgcolor);
  }
}
function setTopBanner(countdown, dateini, dateend, texts, bgcolor, cta, link){
    var Contenttexts = [];
    Contenttexts = texts;

    var countDownDate,
        datefinal = new Date(dateend),
        dateinitial = new Date(dateini);
    var now = new Date().getTime(); // Set the date we're counting down to
  
    // function getQueryStringValue (key) {  
    //     return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
    // }  
    if (now < dateinitial.getTime()) {
    //console.log("Top Banner come�a: " + dateinitial);
    } else if(now < datefinal.getTime() && !$("body").hasClass("login")) {
        $(".topbanner").css("display", "flex");

        cta == false ? document.getElementById("btnTopbanner").style.display = "none" : "";

        var titleMain  = $(".topbanner .toslide");
        // var titleSubs  = titleMain.find("slick-active");
    
        if(link != null || link != "" || document.querySelector(".topbanner-link") != null){
            document.querySelector(".topbanner-link").setAttribute("href", link);
        }

        if (titleMain.length) {
        Contenttexts.forEach(text => {
            $(titleMain).append('<span class="texto">' + text + '</span>');
        });
        
        titleMain.slick({
            autoplay: false,
            arrows: false,
            dots: false,
            slidesToShow: 1,
            // centerPadding: "10px",
            draggable: false,
            infinite: true,
            pauseOnHover: false,
            swipe: false,
            touchMove: false,
            vertical: true,
            speed: 1000,
            autoplaySpeed: 2000,
            useTransform: true,
            cssEase: 'cubic-bezier(0.645, 0.045, 0.355, 1.000)',
            adaptiveHeight: true
        });
    
        // On init
        // $(Contenttexts).each(function(index, el) {
        //   $(".topbanner .toslide").slick('slickAdd', "<div>" + el.innerHTML + "</div>");
        // });
    
        // Manually refresh positioning of slick
        titleMain.slick('slickPlay');
        };
        $("span.topbanner").css("background-color", bgcolor);
    }
}
function CopyText(btn, txt){
    // Add click event
    document.querySelector(btn).addEventListener('click', function(e){
    e.preventDefault();
    // Select the text
    var TextToCopy;

    if(!document.getElementById("TextToCopy")){
        TextToCopy = document.createElement("input");
        document.body.appendChild(TextToCopy);
        TextToCopy.style.opacity = 0;
        TextToCopy.style.position = "absolute";
        TextToCopy.style.top = 0;
        TextToCopy.setAttribute("id", "TextToCopy");
        document.getElementById("TextToCopy").value = txt;
    }else{
        document.getElementById("TextToCopy").value = txt;
    }
    
    document.getElementById("TextToCopy").select();

    var copied;

    try
    {
        // Copy the text
        document.execCommand('copy');
        copied = document.execCommand('copy');
    } 
    catch (ex)
    {
        copied = false;  
    }

    if(copied)
    {
        // Display the copied text message
        document.querySelector(btn + " .btncopy").innerHTML = "COPIADO";
        document.querySelector(btn + " .btncopy").classList.add("btn-success");
        document.getElementById("TextToCopy").remove();
        setTimeout(() => {
            document.querySelector(btn + " .btncopy").innerHTML = "COPIAR";
            document.querySelector(btn + " .btncopy").classList.remove("btn-success");
        }, 3000);
    }
 
    });
}
// FIM CONTADOR
//------------------ GET ELEMENT FROM ATRIBUTE
window.getAllElementsWithAttribute = function(attribute) {
    var matchingElements = [];
    var allElements = document.getElementsByTagName('*');

    for (var i = 0, n = allElements.length; i < n; i++) {
        if (allElements[i].getAttribute(attribute) !== null) {
        // Element exists with attribute. Add to array.
        matchingElements.push(allElements[i]);
        }
    }

    return matchingElements;
}  
//------------- VIEWPORT ELEMENT
window.isInViewport = function(elem) {
  var bounding = elem.getBoundingClientRect();
  return bounding.top >= 0 && bounding.left >= 0 && bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) && bounding.right <= (window.innerWidth || document.documentElement.clientWidth);
};
// ------------- DETECT SAFARI
// var isSafari = /^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);
var BrowserVendor = "";
(function(){
    if(navigator.vendor.match(/google/i)) {
        BrowserVendor = 'chrome/blink';
    }
    else if(navigator.vendor.match(/apple/i)) {
        BrowserVendor = 'safari/webkit';
    }
    else if(navigator.userAgent.match(/firefox\//i)) {
        BrowserVendor = 'firefox/gecko';
    }
    else if(navigator.userAgent.match(/edge\//i)) {
        BrowserVendor = 'edge/edgehtml';
    }
    else if(navigator.userAgent.match(/trident\//i)) {
        BrowserVendor = 'ie/trident';
    }
    else
    {
        BrowserVendor = navigator.userAgent + "\n" + navigator.vendor;
    }
})();
// ------------- SET VITRINE IMG
window.setVitrineDataImg = function(){
    if(BrowserVendor == 'edge/edgehtml' || BrowserVendor == 'ie/trident'){
        for(var i = 0; i < document.querySelectorAll(".imgsrc").length; i++){
            var imgSource = document.querySelectorAll(".imgsrc")[i].innerHTML;
            var imgSrc = imgSource.substring(
                        imgSource.lastIndexOf('src="') + 5, 
                        imgSource.lastIndexOf('?v=')
                    );
            document.querySelectorAll(".imgsrc")[i].nextSibling.nextSibling.setAttribute('data-img', imgSrc);
        }
    }else{
        document.querySelectorAll(".imgsrc").forEach(function(img){
            if(isInViewport(img)){
                var imgSource = img.innerHTML;
                if(BrowserVendor == 'safari/webkit'){
                    var imgSrc = imgSource.substring(
                        imgSource.lastIndexOf('src="') + 5, 
                        imgSource.lastIndexOf('?v=')
                    );
                    img.nextSibling.nextSibling.setAttribute('data-img', imgSrc);
                }else{
                    var RegexSrc = imgSource.match(/\<img.+src\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/);
                    img.nextSibling.nextSibling.setAttribute('data-img', RegexSrc[1]);
                    img.nextSibling.nextSibling.alt = imgSource.match(/\<img.+alt\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/)[1]
                }
            }
        });
    }
}
// -------------- DETECT DOMISREADY
var domIsReady = (function(domIsReady) {
    var isBrowserIeOrNot = function() {
       return (!document.attachEvent || typeof document.attachEvent === "undefined" ? 'not-ie' : 'ie');
    }
 
    domIsReady = function(callback) {
       if(callback && typeof callback === 'function'){
          if(isBrowserIeOrNot() !== 'ie') {
             document.addEventListener("DOMContentLoaded", function() {
                return callback();
             });
          } else {
             document.attachEvent("onreadystatechange", function() {
                if(document.readyState === "complete") {
                   return callback();
                }
             });
          }
       } else {
          console.error('The callback is not a function!');
       }
    }
    
    return domIsReady;
})(domIsReady || {});

// ------------- LOAD IMG ON SCROLL
window.loadImg = function() {
    setVitrineDataImg();
    var imginview = getAllElementsWithAttribute('data-img');
    if(BrowserVendor == 'edge/edgehtml' || BrowserVendor == 'ie/trident'){
        for(var i=0; i < imginview.length; i++){
            imginview[i].src = imginview[i].dataset.img;
        }
        var ievitrineimg = document.querySelectorAll(".product .product-image img");
        for(var i=0; i < ievitrineimg.length; i++){
            ievitrineimg[i].style.left = 0;
            ievitrineimg[i].style.position = "relative";
            ievitrineimg[i].style.transform = "none";
            document.querySelectorAll(".product p, .product .product-content h2, .product .product-content h3")[i].style.height = "initial";
        }
    }else{
        imginview.forEach(function (img) {
          if (isInViewport(img)) {
            // if(img.src == ""){
            img.src = img.dataset.img; // }
          }
        });
    }
};

$(".slick-arrow").on("click", function(){
    loadImg();
});
window.onmousemove = function () {
    loadImg();
};
// ----------- HEADER POSITION
var prevScrollpos = 0;
function setHeader() {
    if(window.innerWidth >= "1150"){
        document.querySelector("body").style.marginTop = document.querySelector("._header").clientHeight + "px"; 
    }
  if (window.pageYOffset >= document.querySelector("._header").clientHeight) {
    document.querySelector("._header").style.position = "fixed";
    var currentScrollPos = window.pageYOffset;
    if(window.innerWidth <= "768"){
        if (prevScrollpos > currentScrollPos) {
          document.querySelector("._header").style.top = 0;
        } else {
          document.querySelector("._header").style.top = -document.querySelector("._header").clientHeight + "px";
        }
    }
    prevScrollpos = currentScrollPos;
  }else{
    if(window.innerWidth >= "1150"){
        document.querySelector("._header").style.position = "fixed";
        if(document.querySelector("body").style.marginTop != document.querySelector("._header").clientHeight){
            setTimeout(() => {
                document.querySelector("body").style.marginTop = document.querySelector("._header").clientHeight + "px"; 
            }, 100);
        }
    }else{
        document.querySelector("._header").style.position = "initial";
    }
  }
}
// ---------- SCROLL TO POSITION
window.scrollIt = function(destination) {
    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 200;
    var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'linear';
    var callback = arguments.length > 3 ? arguments[3] : undefined;
    var easings = {
      linear: function linear(time) {
        return time;
      },
      easeInQuad: function easeInQuad(time) {
        return time * time;
      },
      easeOutQuad: function easeOutQuad(time) {
        return time * (2 - time);
      },
      easeInOutQuad: function easeInOutQuad(time) {
        return time < 0.5 ? 2 * time * time : -1 + (4 - 2 * time) * time;
      },
      easeInCubic: function easeInCubic(time) {
        return time * time * time;
      },
      easeOutCubic: function easeOutCubic(time) {
        return --time * time * time + 1;
      },
      easeInOutCubic: function easeInOutCubic(time) {
        return time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1;
      },
      easeInQuart: function easeInQuart(time) {
        return time * time * time * time;
      },
      easeOutQuart: function easeOutQuart(time) {
        return 1 - --time * time * time * time;
      },
      easeInOutQuart: function easeInOutQuart(time) {
        return time < 0.5 ? 8 * time * time * time * time : 1 - 8 * --time * time * time * time;
      },
      easeInQuint: function easeInQuint(time) {
        return time * time * time * time * time;
      },
      easeOutQuint: function easeOutQuint(time) {
        return 1 + --time * time * time * time * time;
      },
      easeInOutQuint: function easeInOutQuint(time) {
        return time < 0.5 ? 16 * time * time * time * time * time : 1 + 16 * --time * time * time * time * time;
      }
    };
    var start = window.pageYOffset;
    var startTime = 'now' in window.performance ? performance.now() : new Date().getTime();
    var documentHeight = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);
    var windowHeight = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight;
    var destinationOffset = typeof destination === 'number' ? destination : destination.offsetTop - 80;
    var destinationOffsetToScroll = Math.round(documentHeight - destinationOffset < windowHeight ? documentHeight - windowHeight : destinationOffset);
  
    if ('requestAnimationFrame' in window === false) {
      window.scroll(0, destinationOffsetToScroll);
  
      if (callback) {
        callback();
      }
  
      return;
    }
  
    function scroll() {
      var now = 'now' in window.performance ? performance.now() : new Date().getTime();
      var time = Math.min(1, (now - startTime) / duration);
      var timeFunction = easings[easing](time);
      window.scroll(0, Math.ceil(timeFunction * (destinationOffsetToScroll - start) + start));
  
      if (window.pageYOffset === destinationOffsetToScroll) {
        if (callback) {
          callback();
        }
  
        return;
      } 
  
      requestAnimationFrame(scroll);
    }
  
    scroll();
  }
// ---------- EVENTOS
window.onscroll = function (){
  setHeader();
  loadImg();
}
$(document).on("scrollstop",function(){
    loadImg();
});
$('body').on({
    'touchmove': function() { 
        loadImg();
    }
});

window.removeInvalidChars = function(input) {
    let str = document.querySelectorAll(input);
    for(i = 0; i < str; i++){
        str = str.value;
        console.log(str);
        str = str.replace(new RegExp(ranges.join('|'), 'g'), '');
    }
}

window.GetCookie = function(name){
    var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    if (match) return match[2];
}
function homeCountDown(){
    const corBg = document.querySelector('.w-counter--bg').textContent; 
    document.querySelector('.w-counter').style.backgroundColor = corBg;

    
    if(document.querySelector('.w-counter--container') != null){
        // COUNTERBAR
        let bar = document.createElement("span");
        bar.classList.add("w-counter--container--counterbar")
        let fill = document.createElement("span");
        fill.classList.add("w-counter--bar");
        document.querySelector(".w-counter--container").appendChild(bar);
        document.querySelector(".w-counter--container--counterbar").appendChild(fill);
        document.querySelector(".w-counter--container--counterbar").style.backgroundColor = corBg;

        document.querySelector('.w-counter--container').classList.remove('hide-important');
        let dateFim = document.querySelector('.w-counter--end').textContent;
        dateFim = dateFim.split('/');
        dateFim[2] = dateFim[2].split(' ');
        dateFim = `${dateFim[2][0]}/${dateFim[0]}/${dateFim[1]} ${dateFim[2][1]}`;
        // console.log(dateFim);
        const end = new Date(dateFim);
    
        const _second = 1000;
        const _minute = _second * 60;
        const _hour = _minute * 60;
        const _day = _hour * 24;
        let clock = 0;
        function showRemaining() {
            let now = new Date();
            let distance = end - now;
    
            if (distance <= 0) {
                clearInterval(clock);
                document.querySelector('.w-counter--container').classList.add('hidden')
                if(document.querySelector('.w-counter--cupom') != null){
                    document.querySelector('.w-counter--cupom').classList.remove('hidden')
                    document.querySelector('.w-counter-copy').classList.remove('hidden')
                }
                return;
            }
            let days = Math.floor(distance / _day);
            let hours = Math.floor(distance / 36e5);
            let minutes = Math.floor((distance % _hour) / _minute);
            let seconds = Math.floor((distance % _minute) / _second);
            
            // let dayCounter = document.querySelector('.w-counter--day');
            let hourCounter = document.querySelector('.w-counter--hour');
            let minuteCounter = document.querySelector('.w-counter--minutes');
            let secondsCounter = document.querySelector('.w-counter--seconds');
            const diasText = document.querySelector('.w-counter--info')

            let width = now.getTime() / end.getTime() * 100;
            document.querySelector(".w-counter--bar").style.width = width + "%";

            // dayCounter.innerHTML = days;
            // diasText.textContent = days == 1 ? 'dia' : 'dias';
            hourCounter.innerHTML = hours < 10 ? '0' + hours : hours;
            minuteCounter.innerHTML = minutes < 10 ? '0' + minutes : minutes;
            secondsCounter.innerHTML = seconds < 10 ? '0' + seconds : seconds;
        }

    clock = setInterval(showRemaining, 1000);
}
};
function copiarTopBanner() {
    const btnCopy = document.querySelector('.w-counter-copy');
    const cupomToCopy = document.querySelector('.w-counter--cupom');
    btnCopy.addEventListener('click', function (e) {
        e.preventDefault;
        cupomToCopy.select()
        document.execCommand('copy');
        btnCopy.textContent = "COPIADO";
        btnCopy.classList.add("btn-success");
        setTimeout(() => {
            btnCopy.textContent = "COPIAR";
            btnCopy.classList.remove("btn-success");
        }, 3000);
    })
}


setTimeout(function() {
    if(document.querySelector('.w-counter-copy') != null){
        copiarTopBanner();
    }
    if(document.querySelector('.w-counter') != null){
        if(BrowserVendor == 'safari/webkit'){
            setTimeout(() => {
                homeCountDown();
            }, 3000);
        }
        else{
            homeCountDown();
        }
        // $('.w-counter--slick').slick();
    }
}, 500);

$(document).ready(function(){
    loadImg(); // adicionado para carregar no load as imagens iniciais(); // adicionado para carregar no load as imagens iniciais
    if(BrowserVendor == 'safari/webkit' || BrowserVendor == 'edge/edgehtml' || BrowserVendor == 'ie/trident'){
        setVitrineDataImg();
        console.log("Set OnLoad IE / Safari");
        var imginview = getAllElementsWithAttribute('data-img');
        for(var i = 0; i <= imginview.length; i++){
            imginview[i].src = imginview[i].dataset.img;
        }
    }

});
